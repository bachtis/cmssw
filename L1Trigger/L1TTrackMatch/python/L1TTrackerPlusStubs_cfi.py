import FWCore.ParameterSet.Config as cms
import math
from math import pi


l1DTStubsForTPS = cms.EDProducer("L1TMuonBarrelKalmanStubProducer",
    verbose = cms.int32(0),
    srcPhi = cms.InputTag("simDtTriggerPrimitiveDigis"),
    srcTheta = cms.InputTag("simDtTriggerPrimitiveDigis"),
    minPhiQuality = cms.int32(0),
    minThetaQuality = cms.int32(0),
    minBX = cms.int32(0),                           
    maxBX = cms.int32(0),                           
    disableMasks = cms.bool(False),                               
    cotTheta_1=cms.vint32(105,101,97,93,88,84,79,69,64,58,52,46,40,34,21,14,7,0,-7,-14,-21,-34,-40,-46,-52,-58,-64,-69,-79,-84,-88,-93,-97,-101,-105),
    cotTheta_2=cms.vint32(93,89,85,81,77,73,68,60,55,50,45,40,34,29,17,12,6,0,-6,-12,-17,-29,-34,-40,-45,-50,-55,-60,-68,-73,-77,-81,-85,-89,-93),
    cotTheta_3=cms.vint32(81,77,74,70,66,62,58,51,46,42,38,33,29,24,15,10,5,0,-5,-10,-15,-24,-29,-33,-38,-42,-46,-51,-58,-62,-66,-70,-74,-77,-81)
)


l1NewStubs = cms.EDProducer("L1TMuCorrelatorHitProducer",
    verbose = cms.int32(0),
    srcCSC = cms.InputTag("simCscTriggerPrimitiveDigis"),
    srcDT = cms.InputTag("simDtTriggerPrimitiveDigis"),
    srcRPC = cms.InputTag("simMuonRPCDigis"),
    CSC =cms.PSet(                            
        verbose = cms.int32(0),
        minBX            = cms.int32(0),                           
        maxBX            = cms.int32(0),         
        halfStrips       = cms.vint32(111*2,80*2,64*2,80*2,80*2,80*2,80*2,80*2,80*2),
        numberOfChambers = cms.vint32(36,36,36,18,36,18,36,18,36),                              
        wireOffset       = cms.vint32(0,48,112,0,112,0,96,0,96),                              
        etaLUT1=cms.vint32(396,402,398,393,389,385,381,377,372,367,364,360,358,354,351,348,344,341,338,336,332,329,326,324,320,317,316,314,309,308,303,302,300,297,296,292,291,289,285,281,280,278,277,276,274,275,273,272,279,274,273,275,273,271,269,270,266,266,267,264,263,261,262,259,259,258,258,254,254,253,253,251,250,249,247,246,246,244,244,242,240,240,238,237,237,234,234,232,231,231,227,229,227,225,226,224,224,222,221,220,219,217,216,216,213,214,212,211,209,208,207,205,188,187,185,184,182,183,180,179,178,177,174,174,173,171,171,169,168,167,166,165,164,163,162,161,160,159,157,157,155,154,154,154,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
        etaLUT2=cms.vint32(407,409,408,406,405,404,401,400,398,397,394,393,393,391,389,387,386,386,383,381,380,378,378,374,375,373,372,370,369,368,366,365,362,362,361,360,358,357,356,355,353,352,354,349,349,348,345,345,343,342,342,341,339,337,336,336,335,334,333,332,330,329,328,327,325,325,324,321,322,320,319,319,315,315,315,313,310,310,308,309,307,307,304,304,301,303,301,301,299,299,298,295,293,294,291,292,292,289,289,286,287,286,284,284,284,283,283,282,280,279,276,277,264,261,260,259,256,254,251,249,246,246,244,242,240,239,236,235,233,231,230,228,226,225,223,222,220,218,217,216,214,213,210,210,209,207,206,205,204,203,201,200,198,197,195,194,192,193,191,190,188,188,187,186,184,183,182,182,180,179,179,178,176,176,174,173,0,0,0,0),
        etaLUT3=cms.vint32(391,409,408,407,405,404,402,400,399,398,396,395,394,392,391,390,388,386,384,384,383,382,380,379,378,376,375,374,373,371,369,373,368,367,365,363,362,361,359,358,356,356,354,353,351,350,348,347,346,344,344,342,341,340,339,337,336,336,334,333,332,330,330,330,326,326,325,324,324,322,321,320,318,318,317,316,314,313,312,311,311,309,308,308,306,305,303,302,300,302,301,299,299,297,297,297,282,281,279,277,275,273,271,269,267,264,263,261,259,257,255,254,251,250,249,247,246,244,242,241,239,238,235,234,233,231,230,229,227,225,224,223,221,220,218,217,216,214,213,212,211,209,208,207,207,205,204,202,202,200,198,199,197,196,195,194,193,192,190,191,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
        etaLUT4=cms.vint32(393,405,405,404,402,401,399,398,397,396,394,392,392,391,389,387,387,385,384,384,383,381,379,378,377,376,375,374,373,371,370,0,367,367,366,365,364,363,361,360,360,358,358,355,356,355,353,353,352,350,349,348,347,347,345,345,344,343,342,342,340,340,340,0,337,336,335,335,332,333,331,331,329,328,327,326,326,326,324,324,324,322,320,320,320,319,318,317,317,315,314,313,313,314,312,311,297,296,294,291,289,287,285,283,281,279,277,276,273,272,271,267,265,265,262,261,259,258,256,254,252,250,250,248,247,245,243,242,241,239,238,236,235,233,233,231,229,228,226,226,225,223,221,221,220,217,216,215,214,213,211,212,210,209,208,207,206,205,203,202,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0) 
        ),
   DT = cms.PSet(                         
        verbose = cms.int32(0),
        minPhiQuality = cms.int32(0),
        minThetaQuality = cms.int32(0),
        minBX = cms.int32(0),                           
        maxBX = cms.int32(0),                           
        disableMasks = cms.bool(True),                               
        cotTheta_1=cms.vint32(105,101,97,93,88,84,79,69,64,58,52,46,40,34,21,14,7,0,-7,-14,-21,-34,-40,-46,-52,-58,-64,-69,-79,-84,-88,-93,-97,-101,-105),
        cotTheta_2=cms.vint32(93,89,85,81,77,73,68,60,55,50,45,40,34,29,17,12,6,0,-6,-12,-17,-29,-34,-40,-45,-50,-55,-60,-68,-73,-77,-81,-85,-89,-93),
        cotTheta_3=cms.vint32(81,77,74,70,66,62,58,51,46,42,38,33,29,24,15,10,5,0,-5,-10,-15,-24,-29,-33,-38,-42,-46,-51,-58,-62,-66,-70,-74,-77,-81)
   ),
   RPCBarrel = cms.PSet(                         
    verbose = cms.int32(0),
    minPhiQuality = cms.int32(0),
    minThetaQuality = cms.int32(0),
    minBX = cms.int32(0),                           
    maxBX = cms.int32(0),                           
    disableMasks = cms.bool(False),                               
    cotTheta_1=cms.vint32(105,101,97,93,88,84,79,69,64,58,52,46,40,34,21,14,7,0,-7,-14,-21,-34,-40,-46,-52,-58,-64,-69,-79,-84,-88,-93,-97,-101,-105),
    cotTheta_2=cms.vint32(93,89,85,81,77,73,68,60,55,50,45,40,34,29,17,12,6,0,-6,-12,-17,-29,-34,-40,-45,-50,-55,-60,-68,-73,-77,-81,-85,-89,-93),
    cotTheta_3=cms.vint32(81,77,74,70,66,62,58,51,46,42,38,33,29,24,15,10,5,0,-5,-10,-15,-24,-29,-33,-38,-42,-46,-51,-58,-62,-66,-70,-74,-77,-81),
   )

)




l1StubMatchedMuons = cms.EDProducer("L1TTrackerPlusStubsProducer",
    srcStubs = cms.InputTag("l1DTStubsForTPS"),
    srcTracks = cms.InputTag("TTTracksFromTracklet:Level1TTTracks"),
    maxChi2 = cms.double(100),
    trackMatcherSettings = cms.PSet(
        sectorsToProcess = cms.vint32(0,1,2,3,4,5,6,7,8,9,10,11),
	verbose = cms.int32(0),
        geomPi = cms.double(pi),
        propagationConstants = cms.vdouble(-1.14441e0,-1.24939e0,-1.31598e0,-1.34792e0),
	sectorSettings = cms.PSet(
            verbose = cms.int32(0),
            geomPi = cms.double(pi),
	    stationsToProcess = cms.vint32(1,2,3,4),
	    tolerance = cms.double(3),
	    toleranceB = cms.double(3),
	    toleranceQ = cms.int32(2),
	    phi1 = cms.vdouble(11*pi/12,-11*pi/12,-9*pi/12,-7*pi/12,-5*pi/12,-3*pi/12,-pi/12,pi/12,3*pi/12,5*pi/12,7*pi/12,9*pi/12),
	    phi2 = cms.vdouble(-11*pi/12,-9*pi/12,-7*pi/12,-5*pi/12,-3*pi/12,-pi/12,pi/12,3*pi/12,5*pi/12,7*pi/12,9*pi/12,11*pi/12),
            propagationConstants = cms.vdouble(-1.14441e0,-1.24939e0,-1.31598e0,-1.34792e0),
	    propagationConstantsB = cms.vdouble(-9.05378e-2,-6.34508e-2,-3.22425e-2,-9.16026e-3),
	    etaHigh2 = cms.vdouble(1.25,1.1,0.95,0.835),
	    etaHigh1 = cms.vdouble(0.85,0.725,0.615,0.54),
	    etaHigh0 = cms.vdouble(0.3,0.25,0.21,0.175),
	    etaHighm1 = cms.vdouble(-0.325,-0.25,-0.225,-0.19),
	    etaHighm2 = cms.vdouble(-0.815,-0.72,-0.6,-0.525),
	    etaLow2 = cms.vdouble(0.815,0.72,0.6,0.525),
	    etaLow1 = cms.vdouble(0.325,0.25,0.225,0.19),
	    etaLow0 = cms.vdouble(-0.3,-0.25,-0.21,-0.175),
	    etaLowm1 = cms.vdouble(-0.85,-0.725,-0.615,-0.54),
	    etaLowm2 = cms.vdouble(-1.25,-1.1,-0.95,-0.835),
	    alpha = cms.vdouble(2.50016e-2,3.10230e-2,3.65267e-2,3.46650e-2),
	    beta = cms.vdouble(2*2.13888e1,2*2.15320e1,2*2.09371e1,2*2.98381e1),
	    alphaB = cms.vdouble(5.56536e-3,6.74712e-3,8.22339e-3,1.04466e-2),
	    betaB = cms.vdouble(1.68262e0,1.61702e0,1.52894e0,1.25928e0)
        )
        
    )
)

l1TrackerPlusStubsSequence = cms.Sequence(l1DTStubsForTPS*l1StubMatchedMuons)
